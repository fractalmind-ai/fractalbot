# FractalBot Configuration Example
# Copy this to config.yaml and customize for your setup

gateway:
  # Port for WebSocket server
  port: 18789
  # Bind address (127.0.0.1 for local only)
  bind: 127.0.0.1

channels:
  # Telegram channel configuration
  telegram:
    enabled: true
    # Get from @BotFather on Telegram
    botToken: "your_bot_token_here"
    # Admin Telegram User ID (required for /adduser, /removeuser, /listusers)
    adminID: 5088760910
    # List of Telegram User IDs allowed to interact (admin will be auto-added)
    allowedUsers:
      - 1234567890

    # Mode controls how FractalBot receives Telegram updates.
    # - polling: long polling via getUpdates (recommended for local/dev)
    # - webhook: Telegram calls your HTTPS endpoint
    # If empty, FractalBot auto-selects (webhook if webhook* configured, else polling).
    mode: "polling"

    # Long polling settings (only used in mode: polling)
    pollingTimeoutSeconds: 25
    pollingLimit: 100
    # Persist next update offset (UpdateID+1) to avoid re-processing after restart
    pollingOffsetFile: "./workspace/telegram.offset"

    # Webhook server (local) (only used in mode: webhook)
    # If empty, webhook server will not start.
    webhookListenAddr: ""
    webhookPath: "/telegram/webhook"

    # Webhook registration (Telegram) (only used in mode: webhook)
    # If set, FractalBot will call Telegram setWebhook() on startup.
    # Must be publicly reachable HTTPS URL.
    webhookPublicURL: ""
    # Verified via header: X-Telegram-Bot-Api-Secret-Token
    webhookSecretToken: ""

  # Slack channel configuration (optional)
  slack:
    enabled: false
    botToken: "xoxb-your-bot-token"
    appToken: "xapp-your-app-token"

  # Discord channel configuration (optional)
  discord:
    enabled: false
    # Get from Discord Developer Portal
    token: "your-bot-token"

agents:
  # Workspace directory for agent sessions
  workspace: ./workspace
  # Maximum concurrent agent sessions
  maxConcurrent: 4

  # Optional: oh-my-code integration (route Telegram messages to agent-manager)
  ohMyCode:
    enabled: false
    # Path to the oh-my-code repository
    workspace: "/home/elliot245/workspace/elliot245/oh-my-code"
    # Optional override (relative to workspace or absolute)
    agentManagerScript: ".claude/skills/agent-manager/scripts/main.py"
    # Which agent receives Telegram messages by default
    defaultAgent: "qa-1"
    # Optional allowlist for /agent routing (defaults to only defaultAgent)
    allowedAgents:
      - "qa-1"
      - "coder-a"
    # How long to wait for agent-manager output
    assignTimeoutSeconds: 90
